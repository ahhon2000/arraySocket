#!/usr/bin/python3
from pathlib import Path as P; E=P.exists;R=P.resolve; l=R(P(__file__)).parents
with open(R(next(filter(E,(p/'cfg.py' for p in l))))) as _:exec(_.read())

inclPath()

from client import Client
from server import Server
from TestKit import TestKit


port = 5492

srv = Server()
def trgSrv():
    srv.run(port=port)

cli = Client(f"http://127.0.0.1:{port}")
def trgCli():
    cli.run()

from threading import Thread
thSrv = Thread(target=trgSrv)
thSrv.start()
print(f'debug')

thCli = Thread(target=trgCli)
thCli.start()

import time
time.sleep(3)
srv.stopEvent.set()
cli.sock.emit('stop')
