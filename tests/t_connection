#!/usr/bin/python3
from pathlib import Path as P; E=P.exists;R=P.resolve; l=R(P(__file__)).parents
with open(R(next(filter(E,(p/'cfg.py' for p in l))))) as _:exec(_.read())

inclPath()

from client import Client
from server import Server
from TestKit import TestKit


port = 5492

def trgSrv():
    srv = Server()
    srv.run(port=port)

cli = Client(f"http://127.0.0.1:{port}")
def trgCli():
    cli.run()

from multiprocessing import Process
pSrv = Process(target=trgSrv)
pSrv.start()

pSrv.kill()

import time
time.sleep(2)

from threading import Thread
thCli = Thread(target=trgCli)
thCli.start()
